(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a2548a7","chunk-2d21f315"],{"0734":function(t,e,c){"use strict";c("2df0")},"1f4c":function(t,e,c){"use strict";c.r(e);var a=c("7a23"),n={key:0,class:"container-fluid"},i=Object(a["i"])("div",{class:"text-right"},null,-1),o={class:"row"},r={class:"col-lg-12"},l={class:"form-group form-floating mb-3 "},u=Object(a["i"])("label",null,"ubicacion",-1),d=Object(a["i"])("h4",{class:"text-center"},"Datos Venta",-1),s={class:"table-responsive"},b={ref:"table",class:"table table-hover"},O={class:"thead-dark"},j=Object(a["i"])("tr",null,[Object(a["i"])("th",{width:"100px"},"Código"),Object(a["i"])("th",null,"descripcion"),Object(a["i"])("th",null,"Stock"),Object(a["i"])("th"),Object(a["i"])("th",null,"Acciones")],-1),p={key:0,class:"resultado2"},f={multiple:"",class:"custom-select scrollbar-light-blue"},v={id:"txt_descripcion"},m={id:"txt_existencia"},g=Object(a["i"])("td",null,null,-1),h=Object(a["i"])("tr",null,[Object(a["i"])("th",null,"Código"),Object(a["i"])("th",null,"nombre"),Object(a["i"])("th",null,"cantidad"),Object(a["i"])("th",null,"precio"),Object(a["i"])("th",null,"Acciones")],-1),k={id:"detalle_venta"},y={class:"d-flex align-items-center"},C=Object(a["i"])("i",{class:"svg-inline--fa fas fa-trash-alt fa-w-14"},null,-1),V=Object(a["h"])(" Eliminar "),_={class:"col-lg-12 text-center"},w=Object(a["i"])("label",null,"Acciones",-1),x={class:"form-group"},P=Object(a["i"])("i",{class:"fas fa-save"},null,-1),A=Object(a["h"])(" Generar Venta "),R={key:2},U={class:"modal fade show",id:"staticBackdrop","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel",style:{display:"block"},"aria-modal":"true"},H={class:"modal-dialog modal-center"},N={class:"modal-content"},L={class:"modal-header"},B=Object(a["i"])("h5",{class:"modal-title",id:"staticBackdropLabel"},"Modal title",-1),M=Object(a["i"])("span",{"aria-hidden":"true"},"×",-1),S={class:"modal-body"},D={key:0},E={class:"form-check d-none"},G=Object(a["i"])("label",{class:"form-check-label",for:"defaultCheck1"}," Reportar venta como prestamo ",-1),J=Object(a["i"])("label",{for:"inputNota"},null,-1),q={key:1,class:"text-center"},z=Object(a["i"])("p",null,[Object(a["i"])("strong",{class:"mt-4"},"que desea hacer?")],-1),K=Object(a["i"])("br",null,null,-1),Q={class:"modal-footer"},T=Object(a["i"])("div",{class:"modal-backdrop fade show"},null,-1);function F(t,e,c,F,I,W){var X=Object(a["D"])("NoAccess");return Object(a["u"])(),Object(a["e"])(a["a"],null,[F.usuario.rol.grado<=2?(Object(a["u"])(),Object(a["e"])("div",n,[i,Object(a["i"])("div",o,[Object(a["i"])("div",r,[Object(a["i"])("div",l,[u,Object(a["R"])(Object(a["i"])("select",{onChange:e[1]||(e[1]=function(t){return F.findProductos()}),id:"ubicacion",disabled:F.stateProductos,"onUpdate:modelValue":e[2]||(e[2]=function(t){return F.tienda=t}),name:"ubicacion",class:"form-control"},[(Object(a["u"])(!0),Object(a["e"])(a["a"],null,Object(a["B"])(F.ubicaciones,(function(t){return Object(a["u"])(),Object(a["e"])("option",{key:t,value:t._id},Object(a["H"])(t.nombre),9,["value"])})),128))],40,["disabled"]),[[a["L"],F.tienda]])]),d,Object(a["i"])("div",s,[Object(a["i"])("table",b,[Object(a["i"])("thead",O,[j,Object(a["i"])("tr",null,[Object(a["i"])("td",null,[Object(a["R"])(Object(a["i"])("input",{autocomplete:"off",type:"text",class:"form-control form-control-md",name:"txt_cod_producto",id:"txt_cod_producto","onUpdate:modelValue":e[3]||(e[3]=function(t){return F.buscarProducto=t})},null,512),[[a["M"],F.buscarProducto]]),F.buscarProducto?(Object(a["u"])(),Object(a["e"])("div",p,[Object(a["i"])("select",f,[(Object(a["u"])(!0),Object(a["e"])(a["a"],null,Object(a["B"])(F.productos,(function(t){return Object(a["R"])((Object(a["u"])(),Object(a["e"])("option",{onClick:function(e){return F.selectProducto(t)},key:t._id,value:t._id},Object(a["H"])(t.id_product.descripcion)+"-"+Object(a["H"])(t.id_product.codigo),9,["onClick","value"])),[[a["N"],-1!=t.id_product.codigo.toLowerCase().indexOf(F.buscarProducto.toLowerCase())||-1!=t.id_product.descripcion.toLowerCase().indexOf(F.buscarProducto.toLowerCase())]])})),128))])])):Object(a["f"])("",!0)]),Object(a["i"])("td",v,Object(a["H"])(F.inputsAgregar.id_product.descripcion),1),Object(a["i"])("td",m,Object(a["H"])(F.inputsAgregar.cantidad||0),1),g,Object(a["i"])("td",null,[F.inputsAgregar.cantidad?Object(a["R"])((Object(a["u"])(),Object(a["e"])("button",{key:0,onClick:e[4]||(e[4]=function(t){return F.agregarCarrito()}),id:"add_product_venta",class:"btn btn-dark",disabled:0===F.inputsAgregar.cantidad}," Agregar ",8,["disabled"])),[[a["N"],F.cantidad>0]]):Object(a["f"])("",!0)])]),h]),Object(a["i"])("tbody",k,[(Object(a["u"])(!0),Object(a["e"])(a["a"],null,Object(a["B"])(F.productosVenta,(function(c,n){return Object(a["u"])(),Object(a["e"])("tr",{key:n},[Object(a["i"])("th",null,Object(a["H"])(c.codigo),1),Object(a["i"])("th",null,Object(a["H"])(c.productName),1),Object(a["i"])("th",null,Object(a["H"])(c.cantidad),1),Object(a["i"])("th",null,[Object(a["i"])("div",y,[Object(a["R"])(Object(a["i"])("input",{type:"number",class:"form-control mr-2",style:{"max-width":"100px"},"onUpdate:modelValue":function(t){return c.precio=t}},null,8,["onUpdate:modelValue"]),[[a["M"],c.precio,void 0,{number:!0}]]),Object(a["h"])(" = "+Object(a["H"])(c.precio*c.cantidad),1)])]),Object(a["i"])("th",null,[Object(a["i"])("button",{onClick:e[5]||(e[5]=function(e){return t.deleteProduct(t.indice)}),class:"btn btn-danger"},[C,V])])])})),128))])],512)]),Object(a["i"])("div",_,[w,Object(a["i"])("div",x,[Object(a["i"])("button",{onClick:e[6]||(e[6]=function(t){return F.cancelVenta()}),class:"btn btn-danger mr-2"}," Anular "),Object(a["i"])("button",{onClick:e[7]||(e[7]=function(t){return F.preGuardarCompra()}),class:"btn btn-primary",id:"btn_facturar_venta"},[P,A])])])])])])):(Object(a["u"])(),Object(a["e"])(X,{key:1})),F.modalVenta?(Object(a["u"])(),Object(a["e"])("div",R,[Object(a["i"])("div",U,[Object(a["i"])("div",H,[Object(a["i"])("div",N,[Object(a["i"])("div",L,[B,Object(a["i"])("button",{type:"button",class:"close",onClick:e[8]||(e[8]=function(){return F.newVenta&&F.newVenta.apply(F,arguments)}),"data-dismiss":"modal","aria-label":"Close"},[M])]),Object(a["i"])("div",S,[F.statusVenta?Object(a["f"])("",!0):(Object(a["u"])(),Object(a["e"])("div",D,[Object(a["i"])("div",E,[Object(a["R"])(Object(a["i"])("input",{class:"form-check-input","onUpdate:modelValue":e[9]||(e[9]=function(t){return F.prestamo=t}),type:"checkbox",id:"defaultCheck1"},null,512),[[a["K"],F.prestamo]]),G]),J,Object(a["R"])(Object(a["i"])("input",{"onUpdate:modelValue":e[10]||(e[10]=function(t){return F.notaVenta=t}),type:"text",id:"inputNota",placeholder:"agregar una nota",class:"form-control"},null,512),[[a["M"],F.notaVenta]]),Object(a["R"])(Object(a["i"])("input",{"onUpdate:modelValue":e[11]||(e[11]=function(t){return F.cliente=t}),type:"text",id:"cliente",placeholder:"cliente",class:"form-control mt-4"},null,512),[[a["M"],F.cliente]]),Object(a["R"])(Object(a["i"])("input",{"onUpdate:modelValue":e[12]||(e[12]=function(t){return F.pago=t}),type:"",id:"",placeholder:"tipo de pago ",class:"form-control mt-4"},null,512),[[a["M"],F.pago]])])),F.statusVenta?(Object(a["u"])(),Object(a["e"])("div",q,[z,K,Object(a["i"])("button",{onClick:e[13]||(e[13]=function(){return F.newVenta&&F.newVenta.apply(F,arguments)}),class:"btn btn-primary mr-2"}," registrar otra venta ")])):Object(a["f"])("",!0)]),Object(a["i"])("div",Q,[Object(a["i"])("button",{onClick:e[14]||(e[14]=function(){return F.newVenta&&F.newVenta.apply(F,arguments)}),class:"btn btn-secondary","data-dismiss":"modal"}," Cerrar "),Object(a["i"])("button",{onClick:e[15]||(e[15]=function(t){return F.guardarCompra()}),class:"btn btn-primary"}," Comprar ")])])])]),T])):Object(a["f"])("",!0)],64)}var I=c("1da1"),W=(c("96cf"),c("4de4"),c("d3b7"),c("25f0"),c("99af"),c("d97a")),X=c("bc3a"),Y=c.n(X),Z=c("5502"),$=c("a1e9"),tt=c("98a0"),et={props:["param"],components:{NoAccess:W["default"]},setup:function(){var t=Object(Z["b"])(),e=!1,c=Object($["k"])(""),a=Object($["k"])(!1),n=Object($["k"])(""),i=Object($["k"])({id_product:{}}),o=Object($["k"])(1),r=Object($["k"])(""),l=Object($["k"])(""),u=Object($["k"])(""),d=Object($["k"])(!1),s=Object($["k"])(),b=Object($["k"])(!1),O=Object($["k"])([]),j=Object($["a"])((function(){return t.state.ubicaciones})),p=Object($["a"])((function(){return t.state.toask})),f=Object($["a"])((function(){return t.state.usuario})),v=Object($["a"])((function(){return t.state.productosVenta})),m=Object($["a"])((function(){return t.state.statusVenta})),g=Object($["a"])((function(){return t.state.api})),h=Object($["a"])((function(){return t.state.clientesActivos})),k=Object($["a"])((function(){var t=i.value,e=t.precio*t.iva/100*o.value,c=t.precio*o.value;return c||(c=0),e||(e=0),c+e}));function y(){return C.apply(this,arguments)}function C(){return C=Object(I["a"])(regeneratorRuntime.mark((function t(){var e,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Y.a.get("".concat(g.value,"/productos/stock/").concat(s.value));case 2:e=t.sent,c=e.data,O.value=c,console.log(c.length),c.length>0&&(d.value=!0);case 7:case"end":return t.stop()}}),t)}))),C.apply(this,arguments)}function V(){t.dispatch("vaciarVenta"),l.value="",c.value="",u.value="",b.value=!1,a.value=!1,U()}function _(e){r.value="",t.dispatch("guardarCliente",e)}t.dispatch("getUbicaciones");var w=function(){var e={ruta:"/manager/ventas/add"};t.dispatch("sendUrl",e)};function x(){if(0==v.value.length)return Object(tt["a"])("no se puede hacer una venta vacia",p.value.warning);a.value=!0}function P(t){n.value="",i.value=t}function A(){o.value>i.value.cantidad&&(o.value=i.value.cantidad)}function R(){var e={productName:i.value.id_product.descripcion,codigo:i.value.id_product.codigo,cantidad:o.value,producto_id:i.value.id_product._id,ubicacion_id:s.value},c=O.value.filter((function(t){if(t.id_product._id.toString()==e.producto_id.toString()){var c=t.cantidad-e.cantidad;if(t.cantidad=c,c>=0)return t.cantidad,t}}));c.length>0&&t.dispatch("agregarToCarrito",e)}function U(){t.dispatch("deleteProccessVenta"),i.value={id_product:{}},o.value=1}function H(){t.dispatch("generarPdf")}function N(){t.dispatch("comprar",{cliente:c.value,nota:l.value,credito:b.value,pago:u.value})}return{stateProductos:d,tienda:s,cliente:c,findProductos:y,usuario:f,infoCliente:e,newVenta:V,generarPdf:H,statusVenta:m,prestamo:b,modalVenta:a,notaVenta:l,pago:u,ubicaciones:j,preGuardarCompra:x,guardarCompra:N,cancelVenta:U,agregarCarrito:R,productosVenta:v,verifyStock:A,total:k,cantidad:o,inputsAgregar:i,selectProducto:P,buscarProducto:n,sendUrl:w,selectCliente:_,productos:O,buscarClientes:r,clientes:h}}};c("0734");et.render=F;e["default"]=et},"2df0":function(t,e,c){},d97a:function(t,e,c){"use strict";c.r(e);var a=c("7a23"),n={style:{height:"70vh"},id:"layoutError"},i={id:"layoutError_content"},o={class:"container"},r={class:"row mt-5 justify-content-center"},l={class:"col-lg-6"},u={class:"text-center mt-4"},d=Object(a["i"])("h1",{class:"display-1"},"403",-1),s=Object(a["i"])("p",{class:"lead"},"sin autorizacion",-1),b=Object(a["i"])("p",null,"su acceso a esta area no esta permitido.",-1),O=Object(a["i"])("i",{class:"fas fa-arrow-left me-1"},null,-1),j=Object(a["h"])(" regresar al inicio ");function p(t,e,c,p,f,v){var m=Object(a["D"])("router-link");return Object(a["u"])(),Object(a["e"])(a["a"],null,[Object(a["i"])("div",n,[Object(a["i"])("div",i,[Object(a["i"])("main",null,[Object(a["i"])("div",o,[Object(a["i"])("div",r,[Object(a["i"])("div",l,[Object(a["i"])("div",u,[d,s,b,Object(a["i"])(m,{to:"/"},{default:Object(a["Q"])((function(){return[O,j]})),_:1})])])])])])])]),Object(a["i"])("button",{onClick:e[1]||(e[1]=function(){return p.alert&&p.alert.apply(p,arguments)})})],64)}var f={setup:function(){function t(){for(var t=4e4,e=0;e<t;e++)console.log("hola")}return{alert:t}}};f.render=p;e["default"]=f}}]);
//# sourceMappingURL=chunk-4a2548a7.37648518.js.map