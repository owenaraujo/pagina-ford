(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-345b6491","chunk-2d21f315"],{8696:function(t,e,a){},b292:function(t,e,a){"use strict";a("8696")},c285:function(t,e,a){"use strict";a.r(e);a("d3b7"),a("25f0");var c=a("7a23"),n=Object(c["S"])("data-v-afa0b6e8");Object(c["w"])("data-v-afa0b6e8");var r={key:0,class:"container-fluid"},i=Object(c["i"])("input",{class:"d-none",type:"datetime-local",name:"",id:""},null,-1),o=Object(c["i"])("div",{class:"d-sm-flex align-items-center justify-content-between mb-4"},[Object(c["i"])("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Panel de Administración")],-1),l={class:"text-right mb-2"},u=Object(c["h"])(" mostrar "),s={class:"btn-group ml-2"},b={class:"btn btn-secondary btn-sm dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},d={class:"dropdown-menu"},j=Object(c["i"])("div",{class:"dropdown-divider"},null,-1),O={class:"row"},f={class:" col col-lg-6"},p={class:"table-responsive",style:{"min-height":"70vh"}},v={class:"table  table-bordered",id:"table"},m=Object(c["i"])("thead",{class:"thead-dark"},[Object(c["i"])("tr",null,[Object(c["i"])("th",null,"# factura"),Object(c["i"])("th",null,"Fecha"),Object(c["i"])("th",null,"cantidad de articulos"),Object(c["i"])("th",null,"Acciones")])],-1),h={"aria-label":"...",class:"text-center"},g={class:"pagination justify-content-center"},k=Object(c["i"])("a",{class:"page-link",href:"#",tabindex:"-1","aria-disabled":"true"},"Previous",-1),y={class:"pagination scroll scrollbar-light-blue"},x={class:"page-link"},w=Object(c["i"])("a",{class:"page-link",href:"#"},"Next",-1),F={class:"col col-lg-6"},C={class:"card ",style:{"min-height":"70vh"}},_={key:0,class:"card-body"},A={key:0},I={key:1},T={key:2},R=Object(c["h"])(" fecha: "),M={class:"table"},P=Object(c["i"])("thead",{class:"thead-dark"},[Object(c["i"])("tr",null,[Object(c["i"])("th",{scope:"col"},"#"),Object(c["i"])("th",{scope:"col"},"producto"),Object(c["i"])("th",{scope:"col"},"cantidad"),Object(c["i"])("th",{scope:"col"},"precio"),Object(c["i"])("th",{scope:"col"},"acciones")])],-1),L={scope:"row"},V={style:{"max-width":"20px"}},S={class:"card-footer"},B={class:"d-flex justify-content-around"};Object(c["u"])();var N=n((function(t,e,a,n,N,E){var J=Object(c["C"])("ModalInfoFactura"),z=Object(c["C"])("List",!0),K=Object(c["C"])("NoAccess");return n.usuario.rol.grado<=2?(Object(c["t"])(),Object(c["e"])("div",r,[Object(c["i"])(J,{facturaTotal:n.total-n.totalAbonos},null,8,["facturaTotal"]),i,o,Object(c["i"])("div",l,[u,Object(c["i"])("div",s,[Object(c["i"])("button",b,Object(c["F"])(n.limit),1),Object(c["i"])("div",d,[Object(c["i"])("a",{class:["dropdown-item",{active:5==n.limit}],onClick:e[1]||(e[1]=function(t){return n.limitar(5)})},"5",2),Object(c["i"])("a",{class:["dropdown-item",{active:10==n.limit}],onClick:e[2]||(e[2]=function(t){return n.limitar(10)})},"10",2),Object(c["i"])("a",{class:["dropdown-item",{active:20==n.limit}],onClick:e[3]||(e[3]=function(t){return n.limitar(20)})},"20",2),j,Object(c["i"])("a",{class:["dropdown-item",{active:void 0==n.limit}],onClick:e[4]||(e[4]=function(t){return n.limitar(void 0)})},"todos",2)])])]),Object(c["i"])("div",O,[Object(c["i"])("div",f,[Object(c["i"])("div",p,[Object(c["i"])("table",v,[m,Object(c["h"])(" "+Object(c["F"])(a.param)+" ",1),Object(c["i"])("tbody",null,[(Object(c["t"])(!0),Object(c["e"])(c["a"],null,Object(c["A"])(n.ventas,(function(t,e){return Object(c["P"])((Object(c["t"])(),Object(c["e"])(z,{venta:t,key:e},null,8,["venta"])),[[c["L"],-1!=t.factura.toString().indexOf(a.param)]])})),128))])]),Object(c["i"])("nav",h,[Object(c["i"])("ul",g,[Object(c["i"])("div",{class:["page-item",{disabled:1==n.page}],onClick:e[5]||(e[5]=function(){return n.previous&&n.previous.apply(n,arguments)})},[k],2),Object(c["i"])("div",y,[(Object(c["t"])(!0),Object(c["e"])(c["a"],null,Object(c["A"])(n.lista,(function(t,e){return Object(c["t"])(),Object(c["e"])("div",{key:e,class:["page-item",{active:n.page==t}],onClick:function(e){return n.getPage(t)}},[Object(c["i"])("a",x,Object(c["F"])(t),1)],10,["onClick"])})),128))]),Object(c["i"])("li",{class:["page-item",{disabled:n.lista.length===n.page||void 0===n.limit}],onClick:e[6]||(e[6]=function(){return n.next&&n.next.apply(n,arguments)})},[w],2)])])])]),Object(c["i"])("div",F,[Object(c["i"])("div",C,[n.factura._id?(Object(c["t"])(),Object(c["e"])("div",_,[n.factura.user_id?(Object(c["t"])(),Object(c["e"])("h5",A,"Creada por : "+Object(c["F"])(n.factura.user_id.username||0),1)):Object(c["f"])("",!0),n.factura.pago?(Object(c["t"])(),Object(c["e"])("h5",I,"tipo de pago : "+Object(c["F"])(n.factura.pago||0),1)):Object(c["f"])("",!0),n.factura.nota?(Object(c["t"])(),Object(c["e"])("h5",T,"nota : "+Object(c["F"])(n.factura.nota||0),1)):Object(c["f"])("",!0),Object(c["i"])("span",null,[R,Object(c["i"])("strong",null,Object(c["F"])(n.formatTime(n.factura.createdAt)||0),1)]),Object(c["i"])("table",M,[P,Object(c["i"])("tbody",null,[(Object(c["t"])(!0),Object(c["e"])(c["a"],null,Object(c["A"])(n.factura.productos,(function(t,e){return Object(c["t"])(),Object(c["e"])("tr",{key:e},[Object(c["i"])("th",L,Object(c["F"])(e+1),1),Object(c["i"])("td",V,Object(c["F"])(t.producto_id.descripcion),1),Object(c["i"])("td",null,Object(c["F"])(t.cantidad),1),Object(c["i"])("td",null,Object(c["F"])(t.precio),1),Object(c["i"])("td",null,[Object(c["i"])("button",{class:"btn btn-primary",onClick:function(e){return n.eliminarStock(t.producto_id,t.ubicacion_id,t.precio)}},"devolver articulo ",8,["onClick"])])])})),128))])])])):Object(c["f"])("",!0),Object(c["i"])("div",S,[Object(c["i"])("div",B,[Object(c["i"])("h4",null,"total = "+Object(c["F"])(n.total),1),Object(c["i"])("h4",null,"credito restante = "+Object(c["F"])(n.total-n.totalAbonos),1),Object(c["i"])("button",{class:"btn btn-danger ml-5",onClick:e[7]||(e[7]=function(){return n.abrirModal&&n.abrirModal.apply(n,arguments)})}," abonos")])])])])])])):(Object(c["t"])(),Object(c["e"])(K,{key:1}))})),E=a("1da1"),J=(a("96cf"),a("d81d"),a("99af"),a("5c40")),z=a("a1e9"),K=a("d97a"),U={key:0},$={class:"modal fade show ",id:"staticBackdrop","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel",style:{display:"block"},"aria-modal":"true"},q={class:"modal-dialog modal-center modal-sm"},D={class:"modal-content"},G={class:"modal-header"},H=Object(c["i"])("h5",{class:"modal-title",id:"staticBackdropLabel"},"Modal title",-1),Q=Object(c["i"])("span",{"aria-hidden":"true"},"×",-1),W={class:"modal-body"},X={key:0},Y=Object(c["i"])("h4",{class:"text-center"},"no hay abonos",-1),Z={key:1,class:"d-flex align-content-center justify-content-center"},tt={key:2,class:"d-flex align-content-center justify-content-center"},et={key:3,class:"text-center"},at={class:"modal-footer"},ct=Object(c["i"])("div",{class:"modal-backdrop fade show"},null,-1);function nt(t,e,a,n,r,i){return Object(c["t"])(),Object(c["e"])("div",null,[n.modalInfo?(Object(c["t"])(),Object(c["e"])("div",U,[Object(c["i"])("div",$,[Object(c["i"])("div",q,[Object(c["i"])("div",D,[Object(c["i"])("div",G,[H,Object(c["i"])("button",{type:"button",class:"close",onClick:e[1]||(e[1]=function(){return n.cerrarFactura&&n.cerrarFactura.apply(n,arguments)}),"data-dismiss":"modal","aria-label":"Close"},[Q])]),Object(c["i"])("div",W,[n.abonos.length<=0?(Object(c["t"])(),Object(c["e"])("div",X,[Y])):Object(c["f"])("",!0),Object(c["i"])("ul",null,[(Object(c["t"])(!0),Object(c["e"])(c["a"],null,Object(c["A"])(n.abonos,(function(t,e){return Object(c["t"])(),Object(c["e"])("li",{key:e}," $"+Object(c["F"])(t.cantidad)+"- "+Object(c["F"])(n.formatTime(t.createdAt)),1)})),128))]),a.facturaTotal>0?(Object(c["t"])(),Object(c["e"])("div",Z,[Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return n.abono=t}),type:"number",class:"form-control mr-2"},null,512),[[c["K"],n.abono]]),Object(c["i"])("button",{class:"btn btn-warning",onClick:e[3]||(e[3]=function(){return n.agregarAbono&&n.agregarAbono.apply(n,arguments)})}," agregar ")])):Object(c["f"])("",!0),0==a.facturaTotal?(Object(c["t"])(),Object(c["e"])("div",tt,[n.factura.pagado?Object(c["f"])("",!0):(Object(c["t"])(),Object(c["e"])("button",{key:0,class:"btn btn-success",onClick:e[4]||(e[4]=function(){return n.pagar&&n.pagar.apply(n,arguments)})}," pagar "))])):Object(c["f"])("",!0),n.factura.pagado?(Object(c["t"])(),Object(c["e"])("h4",et," factura pagada")):Object(c["f"])("",!0)]),Object(c["i"])("div",at,[Object(c["i"])("button",{onClick:e[5]||(e[5]=function(){return n.cerrarFactura&&n.cerrarFactura.apply(n,arguments)}),class:"btn btn-secondary","data-dismiss":"modal"}," Cerrar ")])])])]),ct])):Object(c["f"])("",!0)])}var rt=a("5502"),it=a("c1df"),ot=a.n(it),lt=a("bc3a"),ut=a.n(lt),st=a("98a0"),bt={props:["facturaTotal"],setup:function(t){var e=Object(c["c"])((function(){return s.state.toask})),a=Object(c["y"])(t.abono);function n(){return r.apply(this,arguments)}function r(){return r=Object(E["a"])(regeneratorRuntime.mark((function t(){var a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=b.value){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,ut.a.post("".concat(s.state.api,"/ventas/abonos/").concat(s.state.factura._id),{cantidad:b.value});case 4:a=t.sent,c=a.data,c.status&&(Object(st["a"])(c.value,e.value.success),s.dispatch("findAbonos"),b.value=0),c.status||Object(st["a"])(c.value,e.value.danger);case 8:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}function i(t){return ot()(t).format("lll")}function o(){s.dispatch("cerrarModalInfo")}function l(){return u.apply(this,arguments)}function u(){return u=Object(E["a"])(regeneratorRuntime.mark((function t(){var a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(O.value.status){t.next=2;break}return t.abrupt("return",Object(st["a"])("no se puede pagar factura en cero"));case 2:return t.next=4,ut.a.post("".concat(s.state.api,"/ventas/factura/pagar/").concat(O.value._id));case 4:a=t.sent,c=a.data,c.status&&(Object(st["a"])(c.value,e.value.success),O.value.pagado=!0);case 7:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}var s=Object(rt["b"])(),b=Object(c["y"])(0),d=Object(c["c"])((function(){return s.state.modalInfo})),j=Object(c["c"])((function(){return s.state.abonos})),O=Object(c["c"])((function(){return s.state.factura}));return{totalAbono:a,pagar:l,factura:O,modalInfo:d,abonos:j,formatTime:i,cerrarFactura:o,agregarAbono:n,abono:b}}};bt.render=nt;var dt=bt;function jt(t,e,a,n,r,i){return Object(c["t"])(),Object(c["e"])("tr",{class:{"text-muted":!a.venta.status,"text-dark":a.venta.status,"table-active":a.venta._id==n.factura}},[Object(c["i"])("td",null,Object(c["F"])(t.numeralFormat(a.venta.factura,"000000")),1),Object(c["i"])("td",null,Object(c["F"])(n.formatTime(a.venta.createdAt)),1),Object(c["i"])("td",null,Object(c["F"])(a.venta.productos.length),1),Object(c["i"])("td",null,[Object(c["i"])("button",{onClick:e[1]||(e[1]=function(t){return n.detalles(a.venta)}),type:"button",class:"btn btn-secondary view_factura ml-2"}," detalles ")])],2)}var Ot={props:["venta"],setup:function(t){function e(t){return ot()(t).format("L")}var a=Object(rt["b"])(),c=Object(z["k"])(t.venta),n=c.value,r=Object(J["d"])((function(){return a.state.factura._id})),i=Object(J["d"])((function(){return a.state.modalInfo}));function o(){a.dispatch("guardarVenta",c.value),a.dispatch("generarPdf")}var l=Object(J["d"])((function(){return n.productos.reduce((function(t,e){return t+(e.precio*e.iva/100+e.precio)*e.cantidad}),0)})),u=Object(J["d"])((function(){return a.state.system.info.dolar}));function s(t){a.dispatch("getInfoVenta",t)}return{total:l,pdf:o,formatTime:e,modalInfo:i,detalles:s,dolar:u,factura:r}}};Ot.render=jt;var ft=Ot,pt={props:["param"],components:{List:ft,NoAccess:K["default"],ModalInfoFactura:dt},setup:function(){function t(t){return ot()(t).format("lll")}var e=Object(J["d"])((function(){var t=0;return c.state.factura.productos.map((function(e){t+=e.cantidad*e.precio})),t})),a=Object(J["d"])((function(){var t=0;return c.state.abonos.map((function(e){t+=e.cantidad})),t})),c=Object(rt["b"])(),n=Object(J["d"])((function(){return c.state.api})),r=Object(J["d"])((function(){return c.state.usuario})),i=Object(J["d"])((function(){return c.state.factura})),o=Object(z["k"])([]),l=Object(z["k"])(10),u=Object(z["k"])(1),s=Object(z["k"])([]);function b(t){l.value=t,u.value=1,g()}function d(){1!==u.value&&void 0!==l.value&&(u.value--,g())}function j(){u.value!==s.value.length&&void 0!==l.value&&(u.value++,g())}function O(t){u.value=t,g()}function f(){c.dispatch("cerrarModalInfo")}function p(){return v.apply(this,arguments)}function v(){return v=Object(E["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=this.fechaInicio){t.next=2;break}return t.abrupt("return");case 2:if(null!=this.fechaFinal){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,ut.a.get("".concat(this.server,"/ventas/get/").concat(this.fechaInicio,"/").concat(this.fechaFinal));case 6:e=t.sent,a=e.data,console.log(a);case 9:case"end":return t.stop()}}),t,this)}))),v.apply(this,arguments)}function m(t,e,a){return h.apply(this,arguments)}function h(){return h=Object(E["a"])(regeneratorRuntime.mark((function t(r,o,l){var u,s,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(l>e.value-a.value)){t.next=2;break}return t.abrupt("return",Object(st["a"])("no se puede eliminar el producto"));case 2:return u={id_venta:i.value._id,producto_id:r._id,id_tienda:o},t.next=5,ut.a.post("".concat(n.value,"/ventas/edit"),u);case 5:if(s=t.sent,b=s.data,0!=e.value){t.next=11;break}return t.next=10,ut.a.post("".concat(n.value,"/ventas/cancelar?id=").concat(i.value._id));case 10:g();case 11:if(!b.status){t.next=19;break}return t.next=14,c.dispatch("getInfoVenta",b.result);case 14:if(console.log(e),0!=e.value){t.next=18;break}return t.next=18,ut.a.post("".concat(n.value,"/ventas/cancelar?id=").concat(i.value._id));case 18:g();case 19:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}function g(){return k.apply(this,arguments)}function k(){return k=Object(E["a"])(regeneratorRuntime.mark((function t(){var e,a,c,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o.value=[],t.next=3,ut.a.get("".concat(n.value,"/ventas/").concat(l.value,"/").concat(u.value));case 3:for(e=t.sent,a=e.data,o.value=a.ventas,s.value=[],c=0;c<a.count/l.value;c++)r=c+1,s.value.push(r);case 8:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}return g(),{totalAbonos:a,eliminarStock:m,abrirModal:f,ventas:o,getVentas:p,lista:s,limit:l,page:u,getPage:O,previous:d,next:j,limitar:b,usuario:r,factura:i,formatTime:t,total:e}}};a("b292");pt.render=N,pt.__scopeId="data-v-afa0b6e8";e["default"]=pt},d97a:function(t,e,a){"use strict";a.r(e);var c=a("7a23"),n={style:{height:"70vh"},id:"layoutError"},r={id:"layoutError_content"},i={class:"container"},o={class:"row mt-5 justify-content-center"},l={class:"col-lg-6"},u={class:"text-center mt-4"},s=Object(c["i"])("h1",{class:"display-1"},"403",-1),b=Object(c["i"])("p",{class:"lead"},"sin autorizacion",-1),d=Object(c["i"])("p",null,"su acceso a esta area no esta permitido.",-1),j=Object(c["i"])("i",{class:"fas fa-arrow-left me-1"},null,-1),O=Object(c["h"])(" regresar al inicio ");function f(t,e,a,f,p,v){var m=Object(c["C"])("router-link");return Object(c["t"])(),Object(c["e"])(c["a"],null,[Object(c["i"])("div",n,[Object(c["i"])("div",r,[Object(c["i"])("main",null,[Object(c["i"])("div",i,[Object(c["i"])("div",o,[Object(c["i"])("div",l,[Object(c["i"])("div",u,[s,b,d,Object(c["i"])(m,{to:"/"},{default:Object(c["O"])((function(){return[j,O]})),_:1})])])])])])])]),Object(c["i"])("button",{onClick:e[1]||(e[1]=function(){return f.alert&&f.alert.apply(f,arguments)})})],64)}var p={setup:function(){function t(){for(var t=4e4,e=0;e<t;e++)console.log("hola")}return{alert:t}}};p.render=f;e["default"]=p}}]);
//# sourceMappingURL=chunk-345b6491.616cec99.js.map